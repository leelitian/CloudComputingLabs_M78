package lab2;

import java.io.BufferedReader; 
import java.io.IOException; 
import java.io.InputStreamReader; 
import java.io.PrintWriter; 
import java.net.HttpURLConnection; 
import java.net.URL; 

import java.util.Scanner;

public class httpclient { 
    //发送一个GET请求 
    public static void get(String path) throws Exception{ 
        HttpURLConnection httpConn=null; 
        try { 
            URL url=new URL(path); 
            httpConn=(HttpURLConnection)url.openConnection(); 
            //这里只是对服务器的测试，所以不需要判断getResponseCode()的结果
            httpConn.getResponseCode();
        } catch (IOException e) { 
            e.printStackTrace(); 
        }finally{ 
            httpConn.disconnect(); 
        } 
    } 
    //发送一个GET请求,参数形式key1=value1&key2=value2... 
    public static void post(String path,String params) throws Exception{ 
        HttpURLConnection httpConn=null; 
        PrintWriter out=null; 
        try { 
            URL url=new URL(path); 
            httpConn=(HttpURLConnection)url.openConnection(); 
            httpConn.setRequestMethod("POST"); 
            httpConn.setDoOutput(true); 
               
            //发送post请求参数 
            out=new PrintWriter(httpConn.getOutputStream()); 
            out.println(params); 
            out.flush(); 
            //httpConn.connect();  
            //读取响应 
            httpConn.getResponseCode();
        } catch (IOException e) { 
            e.printStackTrace(); 
        }finally{
        	out.close();
            httpConn.disconnect(); 
        } 
    } 
       
    public static void main(String[] args) throws Exception {
    	Scanner sc = new Scanner(System.in); 
    	System.out.println("请选择方法 1.get 2.post"); 
    	int method = sc.nextInt(); 
    	System.out.println("请输入发送次数"); 
    	int cnt = sc.nextInt(); 
    	if(method == 1){
    		for(int i=0 ; i<cnt ;i++) {
    			httpclient.get("http://localhost:8999/index.html/a?a=1"); 
    		}
    		
    	}
    	else if(method == 2){
    		for(int i=0 ; i<cnt ;i++) {
    			httpclient.post("http://localhost:8999/Post_show", "Name=h"); 
    		}
    	}
        
    } 
   
}